<view class="container">
  <view class="header">
    <view class="title">ğŸ” ç”¨æˆ·æ•°æ®è°ƒè¯•</view>
    <view class="subtitle">æ£€æŸ¥æœ¬åœ°å’Œäº‘ç«¯ç”¨æˆ·æ•°æ®</view>
    <view class="refresh-time">æœ€ååˆ·æ–°: {{lastRefresh}}</view>
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view class="actions">
    <button class="btn-primary" bindtap="onRefresh">ğŸ”„ åˆ·æ–°æ•°æ®</button>
    <button class="btn-warning" bindtap="clearLocalData">ğŸ§¹ æ¸…ç†æœ¬åœ°</button>
    <button class="btn-success" bindtap="reLogin">ğŸ” é‡æ–°ç™»å½•</button>
  </view>
  
    <!-- ç´§æ€¥æ“ä½œ -->
    <view class="emergency-actions">
      <button class="btn-info" bindtap="recoverRealNickname">ğŸ” æ¢å¤çœŸå®æ˜µç§°</button>
      <button class="btn-warning" bindtap="emergencyDataFix">ğŸš¨ ç´§æ€¥ä¿®å¤</button>
      <button class="btn-danger" bindtap="forceResetUserInfo">âš ï¸ å¼ºåˆ¶é‡ç½®</button>
    </view>

  <!-- OpenID ä¿¡æ¯ -->
  <view class="section">
    <view class="section-title">ğŸ‘¤ ç”¨æˆ·æ ‡è¯†</view>
    <view class="info-item">
      <text class="label">OpenID:</text>
      <text class="value">{{openId || 'æœªè·å–'}}</text>
    </view>
  </view>

  <!-- æœ¬åœ°ç”¨æˆ·ä¿¡æ¯ -->
  <view class="section">
    <view class="section-title">
      ğŸ“± æœ¬åœ°ç”¨æˆ·ä¿¡æ¯
      <button class="copy-btn" data-type="local" bindtap="copyData">å¤åˆ¶</button>
    </view>
    
    <view wx:if="{{userProfile}}">
      <view class="info-item">
        <text class="label">æ˜µç§°:</text>
        <text class="value">{{userProfile.nickName || 'æœªè®¾ç½®'}}</text>
      </view>
      
      <view class="info-item">
        <text class="label">å¤´åƒ:</text>
        <view class="avatar-info">
          <image class="avatar" src="{{userProfile.avatarUrl}}" mode="aspectFill" wx:if="{{userProfile.avatarUrl}}"></image>
          <view class="avatar-url">{{userProfile.avatarUrl || 'æœªè®¾ç½®'}}</view>
        </view>
      </view>
      
      <view class="info-item">
        <text class="label">æ˜¯å¦è‡ªå®šä¹‰:</text>
        <text class="value">{{userProfile.isCustomized ? 'æ˜¯' : 'å¦'}}</text>
      </view>
      
      <view class="info-item">
        <text class="label">æ˜¯å¦å¾®ä¿¡é»˜è®¤:</text>
        <text class="value">{{userProfile.isWechatDefault ? 'æ˜¯' : 'å¦'}}</text>
      </view>
      
      <view class="info-item">
        <text class="label">æˆæƒæ—¶é—´:</text>
        <text class="value">{{userProfile.authTime || 'æœªè®°å½•'}}</text>
      </view>
      
      <view class="info-item">
        <text class="label">è‡ªå®šä¹‰æ—¶é—´:</text>
        <text class="value">{{userProfile.customizedTime || 'æœªè‡ªå®šä¹‰'}}</text>
      </view>
    </view>
    
    <view wx:else class="no-data">
      <text>ğŸ“­ æš‚æ— æœ¬åœ°ç”¨æˆ·ä¿¡æ¯</text>
    </view>
  </view>

  <!-- äº‘ç«¯ç”¨æˆ·æ•°æ® -->
  <view class="section">
    <view class="section-title">
      â˜ï¸ äº‘ç«¯ç”¨æˆ·æ•°æ®
      <button class="copy-btn" data-type="cloud" bindtap="copyData">å¤åˆ¶</button>
    </view>
    
    <view wx:if="{{cloudUserData}}">
      <view wx:if="{{cloudUserData.userInfo}}">
        <view class="info-item">
          <text class="label">æ˜µç§°:</text>
          <text class="value">{{cloudUserData.userInfo.nickName || 'æœªè®¾ç½®'}}</text>
        </view>
        
        <view class="info-item">
          <text class="label">å¤´åƒ:</text>
          <view class="avatar-info">
            <image class="avatar" src="{{cloudUserData.userInfo.avatarUrl}}" mode="aspectFill" wx:if="{{cloudUserData.userInfo.avatarUrl}}"></image>
            <view class="avatar-url">{{cloudUserData.userInfo.avatarUrl || 'æœªè®¾ç½®'}}</view>
          </view>
        </view>
        
        <view class="info-item">
          <text class="label">åˆ›å»ºæ—¶é—´:</text>
          <text class="value">{{cloudUserData.userInfo.createTime || 'æœªè®°å½•'}}</text>
        </view>
        
        <view class="info-item">
          <text class="label">æœ€åæ´»è·ƒ:</text>
          <text class="value">{{cloudUserData.userInfo.lastActiveTime || 'æœªè®°å½•'}}</text>
        </view>
      </view>
      
      <view class="data-preview">
        <text class="label">å®Œæ•´æ•°æ®ç»“æ„:</text>
        <text class="json-data">{{cloudUserData}}</text>
      </view>
    </view>
    
    <view wx:else class="no-data">
      <text>ğŸ“­ æš‚æ— äº‘ç«¯ç”¨æˆ·æ•°æ®</text>
      <button class="btn-secondary" bindtap="loadCloudData">é‡æ–°åŠ è½½</button>
    </view>
  </view>
</view>
