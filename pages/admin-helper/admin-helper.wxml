<!-- 管理员辅助页面 -->
<view class="container">
  
  <!-- 用户信息卡片 -->
  <view class="info-card">
    <view class="card-header">
      <text class="card-title">🎭 用户信息</text>
    </view>
    
    <view class="user-section">
      <view class="avatar-section">
        <image wx:if="{{userInfo && userInfo.avatarUrl}}" 
               class="avatar" 
               src="{{userInfo.avatarUrl}}" 
               mode="aspectFill" />
        <view wx:else class="default-avatar">👤</view>
      </view>
      
      <view class="user-details">
        <view class="user-name">{{userInfo ? userInfo.nickName : '未登录'}}</view>
        <view class="user-status {{isAdmin ? 'admin' : 'normal'}}">
          {{isAdmin ? '🔧 管理员' : '👤 普通用户'}}
        </view>
      </view>
    </view>
    
    <view class="openid-section">
      <view class="openid-label">OpenID:</view>
      <view class="openid-value" bind:tap="copyOpenId">
        {{openid || '未获取'}}
        <text class="copy-hint">(点击复制)</text>
      </view>
    </view>
  </view>

  <!-- 管理员功能区 -->
  <view wx:if="{{isAdmin}}" class="admin-section">
    <view class="card-header">
      <text class="card-title">🛠️ 管理员功能</text>
    </view>
    
    <view class="action-grid">
      <view class="action-item" bind:tap="goToVoiceAdmin">
        <view class="action-icon">🎵</view>
        <text class="action-text">语音包管理</text>
      </view>
      
      <view class="action-item" bind:tap="goToAdmin">
        <view class="action-icon">🛠️</view>
        <text class="action-text">后台管理</text>
      </view>
      
      <view class="action-item" bind:tap="goToVoiceEcho">
        <view class="action-icon">🎭</view>
        <text class="action-text">戏剧回响</text>
      </view>
      
      <view class="action-item" bind:tap="goToAdminManager">
        <view class="action-icon">👥</view>
        <text class="action-text">管理员管理</text>
      </view>
      
      <view class="action-item" bind:tap="goToVoiceEchoInit">
        <view class="action-icon">🔧</view>
        <text class="action-text">数据库初始化</text>
      </view>
      
      <view class="action-item" bind:tap="goToDebugData">
        <view class="action-icon">🔍</view>
        <text class="action-text">数据调试</text>
      </view>
    </view>
  </view>

  <!-- 普通用户提示 -->
  <view wx:else class="normal-user-section">
    <view class="card-header">
      <text class="card-title">ℹ️ 访问说明</text>
    </view>
    
    <view class="notice-content">
      <text class="notice-text">
        您好！如果您是 nightwatcher 管理员，请确保：
      </text>
      
      <view class="notice-steps">
        <text class="step">1. 微信昵称设置为 "nightwatcher" 或 "NightWatcher"</text>
        <text class="step">2. 重新登录小程序以刷新权限</text>
        <text class="step">3. 或者联系开发者将您的OpenID添加到管理员列表</text>
      </view>
    </view>
  </view>

  <!-- 快速操作 -->
  <view class="quick-actions">
    <view class="card-header">
      <text class="card-title">⚡ 快速操作</text>
    </view>
    
    <view class="button-group">
      <button class="action-btn" bind:tap="goToProfile">
        个人中心
      </button>
      
      <button class="action-btn secondary" bind:tap="reLogin">
        重新登录
      </button>
    </view>
  </view>

  <!-- 调试信息 -->
  <view class="debug-section">
    <view class="card-header">
      <text class="card-title">🐛 调试信息</text>
    </view>
    
    <view class="debug-info">
      <text class="debug-item">用户登录: {{debugInfo.userLoggedIn ? '是' : '否'}}</text>
      <text class="debug-item">云开发: {{debugInfo.cloudEnabled ? '已启用' : '未启用'}}</text>
      <text class="debug-item">昵称: {{debugInfo.nickName || '未设置'}}</text>
    </view>
  </view>

</view>