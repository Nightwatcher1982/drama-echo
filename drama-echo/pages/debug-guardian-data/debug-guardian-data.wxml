<!--è°ƒè¯•å®ˆæŠ¤è€…æ•°æ®é¡µé¢-->
<view class="container">
  <view class="header">
    <view class="title">ğŸ” å®ˆæŠ¤è€…æ•°æ®è°ƒè¯•</view>
    <view class="subtitle">è°ƒè¯•å’Œä¿®å¤å®ˆæŠ¤è€…è®¡æ•°é—®é¢˜</view>
  </view>

  <view class="content">
    <button class="debug-btn" bindtap="debugGuardianData" disabled="{{loading}}">
      {{loading ? 'è°ƒè¯•ä¸­...' : 'ğŸ” è°ƒè¯•å®ˆæŠ¤è€…æ•°æ®'}}
    </button>

    <view wx:if="{{debugInfo}}" class="debug-results">
      <view class="section">
        <view class="section-title">ğŸ“Š æ•°æ®ç»Ÿè®¡</view>
        <view class="stat-item">
          <text class="label">æ¼”å‘˜æ•°é‡:</text>
          <text class="value">{{debugInfo.actors}}</text>
        </view>
        <view class="stat-item">
          <text class="label">è¯­éŸ³åŒ…æ•°é‡:</text>
          <text class="value">{{debugInfo.voicePacks}}</text>
        </view>
        <view class="stat-item">
          <text class="label">æ–°è´­ä¹°è®°å½•:</text>
          <text class="value">{{debugInfo.newPurchases}}</text>
        </view>
        <view class="stat-item">
          <text class="label">æ—§è´­ä¹°è®°å½•:</text>
          <text class="value">{{debugInfo.oldPurchases}}</text>
        </view>
        <view class="stat-item">
          <text class="label">ç²‰ä¸æ¦œè®°å½•:</text>
          <text class="value">{{debugInfo.fanRanking}}</text>
        </view>
      </view>

      <view class="section">
        <view class="section-title">ğŸ‘¥ å®ˆæŠ¤è€…è®¡æ•°è¯¦æƒ…</view>
        <view wx:for="{{debugInfo.actorGuardianCounts}}" wx:key="actorId" class="actor-item">
          <view class="actor-name">{{item.actorName}}</view>
          <view class="actor-details">
            <text class="label">è¯­éŸ³åŒ…ID:</text>
            <text class="value">{{item.packIds.join(', ')}}</text>
          </view>
          <view class="actor-details">
            <text class="label">æ–°è´­ä¹°è®°å½•:</text>
            <text class="value">{{item.newPurchases}}æ¡</text>
          </view>
          <view class="actor-details">
            <text class="label">æ—§è´­ä¹°è®°å½•:</text>
            <text class="value">{{item.oldPurchases}}æ¡</text>
          </view>
          <view class="actor-details">
            <text class="label">å”¯ä¸€ç”¨æˆ·æ•°:</text>
            <text class="value guardian-count">{{item.uniqueUsers}}äºº</text>
          </view>
          <view class="actor-details">
            <text class="label">å½“å‰å®ˆæŠ¤è€…è®¡æ•°:</text>
            <text class="value guardian-count">{{item.currentGuardianCount}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>
</view>
