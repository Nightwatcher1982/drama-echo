<view class="container fade-in">
  <!-- 顶部导航 -->
  <view class="top-bar">
    <view class="nav-bar">
      <view class="nav-title">戏剧回响</view>
      <view class="nav-actions">
        <text class="nav-icon">⋯</text>
        <text class="nav-icon">○</text>
      </view>
    </view>
  </view>

  <!-- 用户信息卡片 -->
  <view class="user-card">
    <view wx:if="{{userLoggedIn}}" class="user-info" bindtap="goToProfile">
      <image src="{{userProfile.avatarUrl}}" class="user-avatar" mode="aspectFill" wx:if="{{userProfile.avatarUrl}}"></image>
      <view class="avatar-placeholder" wx:else>👤</view>
      <view class="user-details">
        <text class="user-name">{{displayName}}</text>
        <text class="user-stats">已收藏 {{userPurchaseCount || 897}}个专属声音</text>
      </view>
      <view class="profile-btn">个人中心 ></view>
    </view>
    <button wx:else class="login-btn" bindtap="handleLogin">
      <text class="login-text">🎭 微信登录</text>
    </button>
  </view>

  <!-- 标语 -->
  <view class="quote">
    <text class="quote-text">「聆听内心的戏剧回响,感受生活的每一个音符」</text>
  </view>


  <!-- 主要功能区域 -->
  <view class="main-feature-card" bindtap="goToEcho">
    <view class="feature-header">
      <view class="feature-title">戏剧回响</view>
      <view class="title-decoration">～～～</view>
      <view class="feature-subtitle">演员语音·专属收藏</view>
    </view>
    
    <view class="feature-content">
      <view class="actor-avatars">
        <view class="avatar-stack">
          <view class="actor-avatar" wx:for="{{actorAvatars}}" wx:key="index" style="z-index: {{10-index}}; left: {{index * 8}}rpx;">
            <image src="{{item}}" mode="aspectFill" class="avatar-img"></image>
          </view>
        </view>
      </view>
      
      <view class="feature-icon">
        <image src="/images/figma-assets/gift-box-new.png" class="gift-box-icon" mode="aspectFit"></image>
        <view class="stars">
          <text class="star">⭐</text>
          <text class="star">⭐</text>
          <text class="star">⭐</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 次要功能卡片 -->
  <view class="secondary-features">
    <!-- 魔法之书 -->
    <view class="secondary-card" bindtap="goToMagicBook">
      <view class="card-header">
        <view class="card-title">魔法之书</view>
        <view class="title-decoration">～～～</view>
        <view class="card-subtitle">星座运势·记录心情</view>
      </view>
      <view class="card-icon">
        <image src="/images/figma-assets/magic-hat-new.png" class="magic-hat-icon" mode="aspectFit"></image>
        <view class="magic-stars">
          <text class="magic-star">✨</text>
          <text class="magic-star">✨</text>
          <text class="magic-star">✨</text>
        </view>
      </view>
    </view>

    <!-- 许愿池 -->
    <view class="secondary-card" bindtap="goToWishPool">
      <view class="card-header">
        <view class="card-title">许愿池</view>
        <view class="title-decoration">～～～</view>
        <view class="card-subtitle">许下愿望·汇聚原力</view>
      </view>
      <view class="card-icon">
        <image src="/images/figma-assets/wish-star-new.png" class="wish-star-icon" mode="aspectFit"></image>
      </view>
    </view>
  </view>

  <!-- 调试工具 -->
  <view class="debug-tools">
    <button class="debug-btn" bindtap="goToDebugPermissions">
      🔧 权限调试工具
    </button>
  </view>

  <!-- 底部标语 -->
  <view class="footer-quote">
    <text class="footer-text">「让戏剧的回响在心中永存」</text>
  </view>
</view> 