<!--测试守护者显示页面-->
<view class="container">
  <view class="header">
    <view class="title">🧪 守护者显示测试</view>
    <view class="subtitle">测试守护者计数是否正确显示</view>
  </view>

  <view class="content">
    <button class="refresh-btn" bindtap="refreshData" disabled="{{loading}}">
      {{loading ? '加载中...' : '🔄 刷新数据'}}
    </button>

    <view wx:if="{{!loading && actorsData.length > 0}}" class="actors-list">
      <view wx:for="{{actorsData}}" wx:key="_id" class="actor-card">
        <view class="actor-header">
          <view class="actor-name">{{item.name}}</view>
          <view class="actor-id">ID: {{item._id}}</view>
        </view>
        
        <view class="actor-stats">
          <view class="stat-item">
            <text class="stat-label">守护者:</text>
            <text class="stat-value guardian-count">{{item.stats.guardianCount || 0}}</text>
          </view>
          <view class="stat-item">
            <text class="stat-label">语音包:</text>
            <text class="stat-value">{{item.stats.voicePackCount || 0}}</text>
          </view>
        </view>
        
        <view class="actor-details">
          <view class="detail-item">
            <text class="label">原始stats:</text>
            <text class="value">{{item.stats ? JSON.stringify(item.stats) : 'null'}}</text>
          </view>
        </view>
      </view>
    </view>

    <view wx:elif="{{!loading && actorsData.length === 0}}" class="empty-state">
      <view class="empty-icon">📭</view>
      <view class="empty-text">暂无演员数据</view>
    </view>
  </view>
</view>
