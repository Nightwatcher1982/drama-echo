<!--è°ƒè¯•å®ˆæŠ¤è€…è®¡æ•°é¡µé¢-->
<view class="container">
  <view class="header">
    <view class="title">ğŸ” å®ˆæŠ¤è€…è®¡æ•°è°ƒè¯•</view>
    <view class="subtitle">è°ƒè¯•å’Œä¿®å¤å®ˆæŠ¤è€…è®¡æ•°é—®é¢˜</view>
  </view>

  <view class="actions">
    <button class="btn-primary" bind:tap="debugGuardianCount" disabled="{{loading}}">
      {{loading ? 'è°ƒè¯•ä¸­...' : 'ğŸ” è°ƒè¯•å®ˆæŠ¤è€…è®¡æ•°'}}
    </button>
    
    <button class="btn-secondary" bind:tap="updateGuardianCount" disabled="{{loading}}">
      ğŸ”„ æ‰‹åŠ¨æ›´æ–°è®¡æ•°
    </button>
  </view>

  <view wx:if="{{debugInfo.actor}}" class="debug-info">
    <view class="info-section">
      <view class="section-title">æ¼”å‘˜ä¿¡æ¯</view>
      <view class="info-item">
        <text class="label">æ¼”å‘˜ID:</text>
        <text class="value">{{debugInfo.actor.id}}</text>
      </view>
      <view class="info-item">
        <text class="label">æ¼”å‘˜åç§°:</text>
        <text class="value">{{debugInfo.actor.name}}</text>
      </view>
      <view class="info-item">
        <text class="label">å½“å‰å®ˆæŠ¤è€…è®¡æ•°:</text>
        <text class="value guardian-count">{{debugInfo.actor.currentGuardianCount}}</text>
      </view>
    </view>

    <view class="info-section">
      <view class="section-title">è¯­éŸ³åŒ…ä¿¡æ¯</view>
      <view class="info-item">
        <text class="label">è¯­éŸ³åŒ…æ•°é‡:</text>
        <text class="value">{{debugInfo.voicePacks.count}}</text>
      </view>
      <view class="info-item">
        <text class="label">è¯­éŸ³åŒ…ID:</text>
        <text class="value small">{{debugInfo.voicePacks.packIds.join(', ')}}</text>
      </view>
    </view>

    <view class="info-section">
      <view class="section-title">è´­ä¹°è®°å½•</view>
      <view class="info-item">
        <text class="label">æ–°é›†åˆè´­ä¹°è®°å½•:</text>
        <text class="value">{{debugInfo.purchases.newCollection.count}}æ¡</text>
      </view>
      <view class="info-item">
        <text class="label">æ—§é›†åˆè´­ä¹°è®°å½•:</text>
        <text class="value">{{debugInfo.purchases.oldCollection.count}}æ¡</text>
      </view>
    </view>

    <view class="info-section">
      <view class="section-title">è®¡ç®—ç»“æœ</view>
      <view class="info-item">
        <text class="label">è®¡ç®—å‡ºçš„å®ˆæŠ¤è€…è®¡æ•°:</text>
        <text class="value guardian-count">{{debugInfo.guardianCount.calculated}}</text>
      </view>
      <view class="info-item">
        <text class="label">å”¯ä¸€ç”¨æˆ·æ•°:</text>
        <text class="value">{{debugInfo.guardianCount.uniqueUsers.length}}äºº</text>
      </view>
    </view>
  </view>
</view>




