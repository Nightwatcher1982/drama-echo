<!-- éŸ³é¢‘æ’­æ”¾å™¨ç»„ä»¶ - å”±ç‰‡æœºé£Žæ ¼ -->
<view class="audio-player" wx:if="{{show}}">
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <view class="top-bar">
    <view class="nav-bar">
      <view class="nav-title"></view>
    </view>
  </view>
  
  <!-- æ’­æ”¾å™¨å¤´éƒ¨ -->
  <view class="player-header">
    <view class="back-btn" bind:tap="closePlayer">
      <text class="back-icon">â€¹</text>
    </view>
    <view class="header-title">{{fileName || 'éŸ³é¢‘æ–‡ä»¶'}}</view>
    <view class="close-btn" bind:tap="closePlayer">
    </view>
  </view>
  
  <!-- å”±ç‰‡æœºä¸»ä½“ -->
  <view class="record-player-section">
    <view class="turntable-container">
      <!-- å”±ç‰‡æœºåº•åº§ -->
      <view class="turntable-base">
        <!-- å”±ç‰‡ -->
        <view class="record" style="transform: rotate({{rotationAngle}}deg);">
          <!-- å”±ç‰‡å°é¢ -->
          <view class="record-cover">
            <swiper wx:if="{{coverImages && coverImages.length > 0}}" 
                    class="cover-swiper" 
                    autoplay="{{coverImages.length > 1}}"
                    interval="8000"
                    duration="1600"
                    circular="{{coverImages.length > 1}}"
                    indicator-dots="{{false}}"
                    bindchange="onCoverImageChange">
              <swiper-item wx:for="{{coverImages}}" wx:key="index">
                <image src="{{item}}" class="cover-image" mode="aspectFill"></image>
              </swiper-item>
            </swiper>
            <image wx:elif="{{coverImage}}" src="{{coverImage}}" class="cover-image" mode="aspectFill"></image>
            <view wx:else class="cover-placeholder">
              <text class="placeholder-icon">ðŸŽµ</text>
            </view>
          </view>
          <!-- å”±ç‰‡ä¸­å¿ƒå­” -->
          <view class="record-center"></view>
          <!-- å”±ç‰‡çº¹ç† -->
          <view class="record-grooves">
            <view class="groove groove-1"></view>
            <view class="groove groove-2"></view>
            <view class="groove groove-3"></view>
            <view class="groove groove-4"></view>
          </view>
        </view>
        
        <!-- å”±é’ˆ -->
        <view class="tonearm {{isPlaying ? 'playing' : ''}}">
          <view class="tonearm-base"></view>
          <view class="tonearm-arm"></view>
          <view class="tonearm-head"></view>
        </view>
      </view>
    </view>
  </view>
  
  <!-- æ­Œæ›²ä¿¡æ¯åŒºåŸŸ -->
  <view class="song-info-section">
    <view class="song-details">
      <view class="artist-name">{{fileName || 'æœªçŸ¥è‰ºæœ¯å®¶'}}</view>
      <view class="song-index">{{currentTrackIndex + 1}} / {{totalTracks}}</view>
    </view>
  </view>
  
  <!-- è¿›åº¦æ¡åŒºåŸŸ -->
  <view class="progress-section">
    <view class="time-display">
      <text class="current-time">{{formatTime(currentTime)}}</text>
      <text class="duration">{{formatTime(duration)}}</text>
    </view>
    
    <!-- è¿›åº¦æ¡ -->
    <view class="progress-container">
      <slider 
        min="0" 
        max="{{duration}}" 
        value="{{currentTime}}" 
        show-value="{{false}}"
        block-size="20"
        block-color="#ffffff"
        activeColor="#e74c3c"
        backgroundColor="rgba(255,255,255,0.2)"
        bind:change="onSliderChange"
        bind:changing="onSliderChanging">
      </slider>
    </view>
    
  </view>
  
  <!-- æ’­æ”¾æŽ§åˆ¶åŒºåŸŸ -->
  <view class="player-controls">
    <view class="control-btn prev-btn" bind:tap="playPrevious">
      <text class="btn-icon">ï¹¤</text>
    </view>
    <view class="control-btn main-play-btn {{isPlaying ? 'playing' : ''}}" bind:tap="{{isPlaying ? 'pauseAudio' : 'playAudio'}}">
      <text class="btn-icon">{{isPlaying ? 'â– ' : 'â–·'}}</text>
    </view>
    <view class="control-btn next-btn" bind:tap="playNext">
      <text class="btn-icon">ï¹¥</text>
    </view>
  </view>
</view>
