<!-- å”±ç‰‡æœºé£æ ¼è¯­éŸ³æ’­æ”¾å™¨ç»„ä»¶ -->
<view class="voice-player-container {{isOpen ? 'open' : ''}}">
  <!-- æ’­æ”¾å™¨èƒŒæ™¯é®ç½© -->
  <view class="player-overlay {{isOpen ? 'show' : ''}}" bind:tap="closePlayer"></view>
  
  <!-- æ’­æ”¾å™¨ä¸»ä½“ -->
  <view class="voice-player {{isOpen ? 'show' : ''}}" catch:tap="stopPropagation">
    
    <!-- æ’­æ”¾å™¨å¤´éƒ¨ -->
    <view class="player-header">
      <view class="player-title">{{currentPack.name || 'è¯­éŸ³æ’­æ”¾å™¨'}}</view>
      <view class="player-subtitle">{{currentActor.name}}</view>
      <view class="close-btn" bind:tap="closePlayer">Ã—</view>
    </view>
    
    <!-- å”±ç‰‡æœºä¸»ä½“ -->
    <view class="record-player">
      
      <!-- å”±ç‰‡ç›˜ -->
      <view class="record-disc {{isPlaying ? 'spinning' : ''}}">
        <!-- å”±ç‰‡çº¹ç† -->
        <view class="record-grooves">
          <view class="groove groove-1"></view>
          <view class="groove groove-2"></view>
          <view class="groove groove-3"></view>
          <view class="groove groove-4"></view>
          <view class="groove groove-5"></view>
        </view>
        
        <!-- å”±ç‰‡ä¸­å¿ƒ -->
        <view class="record-center">
          <view class="center-hole"></view>
          <view class="center-label">
            <view class="label-text">{{currentPack.icon || 'ğŸµ'}}</view>
          </view>
        </view>
      </view>
      
      <!-- å”±è‡‚ -->
      <view class="tone-arm {{isPlaying ? 'playing' : 'rest'}}">
        <view class="arm-base"></view>
        <view class="arm-shaft"></view>
        <view class="arm-head"></view>
      </view>
      
      <!-- æ’­æ”¾æ§åˆ¶å° -->
      <view class="control-panel">
        <!-- éŸ³é‡æ§åˆ¶ -->
        <view class="volume-control">
          <view class="volume-icon">ğŸ”Š</view>
          <slider class="volume-slider" 
                  min="0" max="100" 
                  value="{{volume}}" 
                  bindchange="onVolumeChange"
                  activeColor="#ff6b6b"
                  backgroundColor="rgba(255,255,255,0.3)" />
        </view>
        
        <!-- è¿›åº¦æ§åˆ¶ -->
        <view class="progress-control">
          <view class="time-display">{{formatTime(currentTime)}}</view>
          <slider class="progress-slider" 
                  min="0" max="{{duration}}" 
                  value="{{currentTime}}" 
                  bindchange="onProgressChange"
                  bindchanging="onProgressChanging"
                  activeColor="#ff6b6b"
                  backgroundColor="rgba(255,255,255,0.3)" />
          <view class="time-display">{{formatTime(duration)}}</view>
        </view>
        
        <!-- ä¸»æ§åˆ¶æŒ‰é’® -->
        <view class="main-controls">
          <view class="control-btn prev-btn" bind:tap="playPrevious">â®ï¸</view>
          <view class="control-btn play-btn {{isPlaying ? 'playing' : ''}}" bind:tap="togglePlay">
            {{isPlaying ? 'â¸ï¸' : 'â–¶ï¸'}}
          </view>
          <view class="control-btn next-btn" bind:tap="playNext">â­ï¸</view>
        </view>
      </view>
      
    </view>
    
    <!-- æ’­æ”¾åˆ—è¡¨ -->
    <view class="playlist-section">
      <view class="playlist-header">
        <view class="playlist-title">æ’­æ”¾åˆ—è¡¨ ({{playlist.length}})</view>
        <view class="playlist-toggle" bind:tap="togglePlaylist">
          {{showPlaylist ? 'æ”¶èµ·' : 'å±•å¼€'}} {{showPlaylist ? 'â–²' : 'â–¼'}}
        </view>
      </view>
      
      <view class="playlist {{showPlaylist ? 'show' : ''}}" wx:if="{{playlist.length > 0}}">
        <scroll-view class="playlist-scroll" scroll-y="true" style="max-height: 300rpx;">
          <view wx:for="{{playlist}}" wx:key="id" 
                class="playlist-item {{currentIndex === index ? 'current' : ''}}"
                bind:tap="playTrack" data-index="{{index}}">
            <view class="track-info">
              <view class="track-name">{{item.name}}</view>
              <view class="track-duration">{{formatTime(item.duration)}}</view>
            </view>
            <view class="track-status">
              {{currentIndex === index ? (isPlaying ? 'ğŸµ' : 'â¸ï¸') : 'â™ª'}}
            </view>
          </view>
        </scroll-view>
      </view>
      
      <view class="playlist-empty" wx:else>
        <text class="empty-text">æš‚æ— æ’­æ”¾å†…å®¹</text>
      </view>
    </view>
    
    <!-- æ’­æ”¾å™¨åº•éƒ¨ -->
    <view class="player-footer">
      <view class="playback-mode" bind:tap="togglePlayMode">
        <view class="mode-icon">{{playModeIcons[playMode]}}</view>
        <view class="mode-text">{{playModeTexts[playMode]}}</view>
      </view>
      
      <view class="player-info">
        <view class="info-text">ä»…é™æ’­æ”¾ Â· ç¦æ­¢ä¸‹è½½</view>
        <view class="copyright">Â© æˆå‰§å›å“</view>
      </view>
    </view>
    
  </view>
</view>